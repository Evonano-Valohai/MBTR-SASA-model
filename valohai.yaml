---
- step:
    name: train-model
    image: tensorflow/tensorflow:2.6.0
    command:
      - pip install valohai-utils
      - pip install -r requirements.txt
      - python ./train_model.py {parameters}
      - /usr/bin/python3 -m pip install --upgrade pip
    parameters:
      - name: epochs
        default: 5
        type: integer
      - name: learning_rate
        default: 0.001
        type: float
    inputs:
      - name: dataset_train
        default: https://valohaidataprod.blob.core.windows.net/valohaidataprod/data/01FW3/01FW3TEFNGBB0W2SYPRHDHF655/upload/mbtr_train.zip?se=2022-02-18T08%3A27%3A59Z&sp=rt&sv=2020-10-02&sr=b&sig=E72IzIT%2FWrY%2BQN7vm%2FVO%2BtY49zp15iNqnBkjpz5A21Q%3D
      - name: dataset_train_sasa
        default: https://valohaidataprod.blob.core.windows.net/valohaidataprod/data/01FW3/01FW3TEFNGBB0W2SYPRHDHF655/upload/sasa_train.zip?se=2022-02-18T08%3A27%3A57Z&sp=rt&sv=2020-10-02&sr=b&sig=D2ErMceKl5T9fuQHBwySAZPWm2iixae46BkFjdLX8Kk%3D
      - name: dataset_test
        default: https://valohaidataprod.blob.core.windows.net/valohaidataprod/data/01FW3/01FW3TEFNGBB0W2SYPRHDHF655/upload/mbtr_test.zip?se=2022-02-18T08%3A28%3A00Z&sp=rt&sv=2020-10-02&sr=b&sig=PGScBaiMpv6nk%2FRujhbH%2BfJXzDqiIjmWfwq3vbGc0QE%3D
      - name: dataset_test_sasa
        default: https://valohaidataprod.blob.core.windows.net/valohaidataprod/data/01FW3/01FW3TEFNGBB0W2SYPRHDHF655/upload/sasas_test.zip?se=2022-02-18T08%3A27%3A45Z&sp=rt&sv=2020-10-02&sr=b&sig=rNOkOJHw3%2BbOax7jGU6o30KhiUgJnJSmkAXf2%2BhY%2FzY%3D